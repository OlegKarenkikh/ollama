# –°—Ç–∞—Ç—É—Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —Å–±–æ—Ä–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

## ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Å–±–æ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å Docker Buildx –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ–∫—É—â–∏–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º

–¢–µ–∫—É—â–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Docker daemon —Å overlay —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è —Å–±–æ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –≠—Ç–æ —Ç–∏–ø–∏—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö –∏–ª–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –Ω–∞ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã.

## üìã –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏:
- ‚úÖ `scripts/buildx_build.sh` - –ë–∞–∑–æ–≤–∞—è —Å–±–æ—Ä–∫–∞ –æ–¥–Ω–æ–≥–æ Dockerfile
- ‚úÖ `scripts/buildx_push.sh` - –°–æ–∑–¥–∞–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ –∏ —Ç–µ–≥–æ–≤  
- ‚úÖ `scripts/buildx_all.sh` - –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ Dockerfile

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ `scripts/BUILDX_README.md` - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `scripts/BUILDX_QUICKSTART.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- ‚úÖ `BUILDX_INSTRUCTIONS.md` - –ò—Ç–æ–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ (–≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –æ–¥–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

```bash
PLATFORM=linux/amd64 ./scripts/buildx_build.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Multi-platform —Å–±–æ—Ä–∫–∞ —Å push

```bash
PUSH=1 PLATFORM=linux/amd64,linux/arm64 ./scripts/buildx_build.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

```bash
PUSH=1 ./scripts/buildx_all.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: –ü—Ä—è–º–∞—è –∫–æ–º–∞–Ω–¥–∞ buildx

```bash
cd /workspace
. scripts/env.sh
export PLATFORM="linux/amd64"
docker buildx build \
  --load \
  --platform="${PLATFORM}" \
  --file=Dockerfile \
  --tag="ollama/ollama:${VERSION}" \
  ${OLLAMA_COMMON_BUILD_ARGS} \
  --build-arg PARALLEL=8 \
  .
```

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏

1. **Docker —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Buildx**
   ```bash
   docker buildx version
   ```

2. **–û–∫—Ä—É–∂–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π overlay —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã**
   - –û–±—ã—á–Ω—ã–π Linux —Å–µ—Ä–≤–µ—Ä
   - –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞
   - CI/CD —Å–∏—Å—Ç–µ–º–∞ (GitHub Actions, GitLab CI, etc.)

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ buildx builder**
   ```bash
   docker buildx create --name ollama-builder --use --bootstrap
   ```

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—ã–π Linux —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É —Å Docker.

### –î–ª—è CI/CD:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Actions, GitLab CI –∏–ª–∏ –¥—Ä—É–≥—É—é CI/CD —Å–∏—Å—Ç–µ–º—É —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Docker.

### –î–ª—è multi-platform —Å–±–æ—Ä–∫–∏:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CI/CD —Å–∏—Å—Ç–µ–º—É –∏–ª–∏ remote builders –¥–ª—è –∫–∞–∂–¥–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–°–º. `scripts/BUILDX_README.md` –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å–æ –≤—Å–µ–º–∏ –æ–ø—Ü–∏—è–º–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏.

## ‚ú® –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

**–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø–æ–¥—Ö–æ–¥—è—â–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏!**

–°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ü—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö —Ç–µ–∫—É—â–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Docker.
